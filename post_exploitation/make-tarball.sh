#generate a tarball to be downloaded onto the exploited device
#!/bin/bash
if [ -z "$1" ]; then
    echo "Architecture of exploited device:"
    read -p "(Options: mipsle mips armhf armel) " arch
else 
    arch="$1"
fi
if [ -z "$2" ]; then
    read -p "Include experimental binaries? (y/N) " experimental
else 
    experimental="$2"
fi
case $experimental in
    [Yy])
        bins="bash dirtyc0w gdb gdbserver perl strace busybox dropbearmulti gdbserver ncat socat tcpdump"
        ;;
    *)
        bins="dirtyc0w busybox dropbearmulti"
        ;;
esac
case $arch in
    mipsle|mips|armhf|armel)
         mkdir -p bin
         cp scripts/* bin/
         for b in $bins; do
             if [ -f "bin-$arch/$b" ]; then
                  cp bin-$arch/$b bin/
             fi
         done
         tar czf $arch.tgz bin chungus
         echo "Tarball $arch.tgz created"
         rm -rf bin
         ;;
    *)
         echo "Please specify the architecture"
         exit 1
         ;;
esac

        

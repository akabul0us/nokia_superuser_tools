#!/bin/sh
if [ -z $1 ]; then
    read -p "Target host: " target_host
else
    target_host="$1"
fi
if [ -z $3 ]; then
    if [ -z $2 ]; then
        echo "To scan a port range, enter the lowest port to scan followed by the highest."
        echo 'ex. "nmap-without-nmap 192.168.1.254 1 1024'
        read -p "First port: " target_port_1
        read -p "Last port: " target_port_2
    else
       target_port_1="$2"
       read -p "Highest port to scan: " target_port_2
    fi
else
    target_port_2="$3"
fi
scan() {
    nc -nvv -w 1 -z $target_host $port | grep -oE "open"
}
port=0
for i in `seq $target_port_1 $target_port_2` ; do
    port=`expr $port + 1`
    scan
    scan_result="$?"
    if [ $scan_result -eq 0 ]; then
        echo "Detected open port $port on $target_host"
    fi
done

